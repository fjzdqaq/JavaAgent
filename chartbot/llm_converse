#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import getpass
import os

def setup_environment():
    """è®¾ç½®ç¯å¢ƒå˜é‡å’Œ LangSmith é…ç½®"""
    
    # å°è¯•åŠ è½½ .env æ–‡ä»¶
    try:
        from dotenv import load_dotenv
        load_dotenv()
        print("âœ… å·²åŠ è½½ .env æ–‡ä»¶")
    except ImportError:
        print("âš ï¸  æœªå®‰è£… python-dotenvï¼Œè·³è¿‡ .env æ–‡ä»¶åŠ è½½")
        print("   å¯ä»¥è¿è¡Œ: pip install python-dotenv")
    
    # è®¾ç½® LangSmith è·Ÿè¸ª
    os.environ["LANGSMITH_TRACING"] = os.getenv("LANGSMITH_TRACING", "true")
    
    # é…ç½® LangSmith API Key
    if "LANGSMITH_API_KEY" not in os.environ:
        api_key = getpass.getpass("è¯·è¾“å…¥æ‚¨çš„ LangSmith API Key (å¯é€‰): ")
        if api_key:
            os.environ["LANGSMITH_API_KEY"] = api_key
    
    # é…ç½® LangSmith é¡¹ç›®åç§°
    if "LANGSMITH_PROJECT" not in os.environ:
        project_name = input("è¯·è¾“å…¥ LangSmith é¡¹ç›®åç§° (é»˜è®¤ä¸º 'default'): ").strip()
        if not project_name:
            project_name = "default"
        os.environ["LANGSMITH_PROJECT"] = project_name
    
    print(f"ğŸš€ LangSmith é…ç½®å®Œæˆ:")
    print(f"   - è·Ÿè¸ªçŠ¶æ€: {os.environ.get('LANGSMITH_TRACING', 'false')}")
    print(f"   - é¡¹ç›®åç§°: {os.environ.get('LANGSMITH_PROJECT', 'default')}")
    print(f"   - API Key: {'å·²è®¾ç½®' if os.environ.get('LANGSMITH_API_KEY') else 'æœªè®¾ç½®'}")

if __name__ == "__main__":
    setup_environment()
